<template args="model showOutput">
  <div class="control">
    <form onsubmit="{model.run(this.command.value)}">
      <div class="input-group">
          <div class="input-group-btn dropup">
            <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">Task <span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li each="task, task.name in model.tasks">
                <a href="#" onclick="{model.command = 'npm run ' + task.name; jQuery('#command').focus()}">{task.name}</a>
                <!-- <button onclick="{model.run('npm run ' + task.name, task.name)}">{task.name}</button> -->
              </li>
            </ul>
          </div><!-- /btn-group -->
          <input type="text" class="form-control input-sm" name="command" id="command" value="{model.command}" required autocomplete="off">
          <span class="input-group-btn">
            <button class="btn btn-default btn-sm" type="submit">Run</button>
          </span>
        </div><!-- /input-group -->
      <!-- <button type="submit">Run</button>
      <button if="model.dead.length" type="button" onclick="{model.removeAllDead()}">Clear</button> -->
    </form>
    <ul hidden="true" class="nav nav-tabs">
      <li role="presentation" class="active"><a href="#">Home</a></li>
      <li role="presentation"><a href="#">Profile</a></li>
      <li role="presentation"><a href="#">Messages</a></li>
    </ul>
  </div>
  <div class="processes">
    <div class="list">
      <ul if="model.processes.length" class="nav nav-tabs">
       <li each="process, process.pid in model.processes">
         <a onclick="{showOutput(process)}">{process.name || process.command}<span>[{process.pid}]</span></span>
         <span class="{'circle ' + (!process.isAlive ? 'dead' : (process.isActive ? 'alive active' : 'alive'))}"></span>
         <button if="process.isAlive" class="btn btn-default" onclick="{model.kill(process)}"><i class="fa fa-stop"></i></button>
         <if condition="!process.isAlive">
           <button class="btn btn-default" onclick="{model.resurrect(process)}"><i class="fa fa-refresh"></i></button>
           <button class="btn btn-default" onclick="{model.remove(process)}"><i class="fa fa-close"></i></button>
         </if>
       </li>
      </ul>
    </div>
    <script>
      IncrementalDOM.elementPlaceholder('div', 'list-output', ['id', 'list-output', 'class', 'splitter'])
      IncrementalDOM.elementPlaceholder('div', 'output', ['class', 'output'])
    </script>
  </div>
 </template>
